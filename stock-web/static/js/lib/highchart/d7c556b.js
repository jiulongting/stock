(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{1030:function(t,o,e){"use strict";var n=e(65),c=(e(16),e(18),e(91),e(32),e(92),"[object Object]"),l="[object Array]";o.a={CopyObject:function(t){var o=this,e={};return"object"!==Object(n.a)(t)?t:(Object.keys(t).forEach((function(n){var r=t[n];switch(o.getType(r)){case c:e[n]=o.CopyObject(r);break;case l:e[n]=[],r.forEach((function(t,c){e[n].push(o.CopyObject(t))}));break;default:e[n]=r}})),e)},CopyArray:function(t){var o=this;return t.map((function(t){return o.CopyObject(t)}))},deepCopy:function(t){return"[object Object]"===t.toString()?this.CopyObject(t):this.CopyArray(t)},getType:function(t){return Object.prototype.toString.call(t)}}},1140:function(t,o,e){},1194:function(t,o,e){"use strict";e(1140)},999:function(t,o,e){"use strict";e.r(o);var n=e(28),c=(e(57),e(46),e(16),e(112),e(975)),object=e(1030),l=e(33),r=(e(2),e(85)),d={layout:"first",mixins:[l.a],components:{ArticleList:c.default},head:function(){return{link:[{rel:"stylesheet",type:"text/css",href:"/css/components/ArticleList.css"}]}},asyncData:function(t){return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},data:function(){return{right:0,followText:"关注的人",stockName:"关注的股",stocksList:{value:0,label:"关注的股",options:[{text:"全部",value:0}]},systemList:{value:0,label:"关注的人",options:[{text:"全部",value:0},{text:"原发",value:1},{text:"受限",value:2},{text:"特别关注",value:3}]},activeName:"follow",stockIsDown:!1,systemIsDown:!1,searchStockName:"",searchStockResponse:null,articles:[],pageNo:0,loading:!1,totalCount:""}},created:function(){this.$nextTick((function(){})),this.listFollowStock()},mounted:function(){this.load()},computed:{noMore:function(){return 15*this.pageNo>=this.totalCount},disabled:function(){return this.loading||this.noMore}},methods:{getBackTopRight:function(){var t=window.document.body.offsetWidth,o=parseInt((t-824)/2)+834;this.right=t-o},stockIconChange:function(t){this.stockIsDown=t},drowDownChange:function(t){this.systemIsDown=t},onShowSystem:function(t){this.systemIsDown="on"===t,this.stockIsDown=!1},onShowStock:function(t){this.stockIsDown="on"==t,this.systemIsDown=!1},listFollowStock:function(){var t=this;r.h.listFollowStock().then((function(o){var e=object.a.CopyObject(t.stocksList);for(var i in o.data){var n=o.data[i];e.options.push({text:n.name,value:n.stock_id,code:n.code})}t.stocksList=e,t.stocksList=Object.assign({},t.stocksList)}))},loadMore:function(){"stock"===this.activeName?this.listStockBook():this.listFollowBook()},load:function(){this.loading=!0,this.pageNo+=1,this.pageNo<6&&("stock"===this.activeName?this.listStockBook():this.listFollowBook())},listStockBook:function(){var t=this;r.h.listStockBook({stock_id:this.stocksList.value,limit:15,start:this.pageNo}).then((function(o){0==o.errCode&&(t.articles=t.articles.concat(o.data.result),t.totalCount=o.data.totalCount),t.loading=!1}))},listFollowBook:function(){var t=this;r.h.listFollowBook({type:this.systemList.value,limit:15,start:this.pageNo}).then((function(o){0==o.errCode&&(t.articles=t.articles.concat(o.data.result),t.totalCount=o.data.totalCount),t.loading=!1}))},querySearchAsync:function(t,o){var e={keyword:t,limit:30,start:1};this._sendPostRequest("/api/v1/stock/search",e).then((function(t){var e=[];t.data.result.forEach((function(t){e.push({id:t.stock_id,value:t.name,code:t.code})})),o(e)})).catch((function(t){console.log(t)}))},dropChange:function(t){this.activeName=t,this.totalCount="",this.pageNo=0,this.articles=[],this.load()},handleCommandFollow:function(t){this.systemList.value=t.value,this.systemList.label=t.text,this.dropChange("follow")},handleCommandStock:function(t){this.stocksList.value=t.value,this.stocksList.label=t.text,this.dropChange("stock")},handlerSelect:function(t,text,o){this.activeName=o,this.articles=[],this.pageNo=1,this.loading=!0,"stock"==o?(this.stockIsDown=!1,this.stocksList.value=t,this.stocksList.label=text,this.listStockBook()):(this.systemIsDown=!1,this.systemList.value=t,this.systemList.label=text,this.listFollowBook())},handleSelectSearch:function(t){var o=this;this.stocksList.options.some((function(o,e,n){return o.value==t.id}))?this.showWarn("你已关注过该股票"):this._sendPostRequest("/api/v1/stock/user/add",{stock_id:t.id}).then((function(e){if(0==e.errCode){o.toast("已关注"+t.value+"请到「关注的股」分组下查看");var n={text:t.value,value:t.stock_id,code:t.code};o.stocksList.options.push(n)}else o.showError(e.msg)})).catch((function(t){console.log(t)}))},removeFollowStock:function(t,o){var e=this,n=this.stocksList.options[t];this.$confirm("提示","是否取消股票"+n.text+"的关注？",{confirmButtonText:"确认",cancelButtonText:"取消"}).then((function(){r.h.removeFollowStock({stock_id:o}).then((function(o){e.$delete(e.stocksList.options,t)}))}))}}},h=(e(1194),e(8)),component=Object(h.a)(d,(function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.load,expression:"load"}],staticClass:"jc-main",attrs:{"infinite-scroll-disabled":"disabled","infinite-scroll-immediate":""}},[e("div",{staticClass:"focus-top hsh-flex-upDown drvi straight-line"},[e("div",{staticClass:"flex1 hsh-flex-upDown"},[e("el-dropdown",{staticClass:"dropFollow",on:{"visible-change":t.drowDownChange,command:t.handleCommandFollow}},[e("div",{staticClass:"downItem",on:{click:function(o){return o.stopPropagation(),t.dropChange("follow")}}},[e("span",{staticClass:"fnormal",class:{active:"follow"==t.activeName}},[t._v(t._s("全部"==t.systemList.label?"关注的人":t.systemList.label))]),t._v(" "),e("i",{staticClass:"icon",class:t.systemIsDown?"el-icon-caret-bottom":"el-icon-caret-top"})]),t._v(" "),e("el-dropdown-menu",{staticClass:"dropFollowMenu",attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.systemList.options,(function(o){return e("el-dropdown-item",{key:o.value,class:{bgGray:t.systemList.value==o.value},attrs:{command:o}},[e("span",{staticClass:"fItem"},[t._v(t._s(o.text))])])})),1)],1),t._v(" "),e("el-dropdown",{attrs:{placement:"bottom-start"},on:{"visible-change":t.stockIconChange}},[e("div",{staticClass:"downItem",on:{click:function(o){return o.stopPropagation(),t.dropChange("stock")}}},[e("span",{staticClass:"fnormal",class:{active:"stock"==t.activeName}},[t._v(t._s("全部"==t.stocksList.label?"关注的股":t.stocksList.label))]),t._v(" "),e("i",{staticClass:"icon",class:t.stockIsDown?"el-icon-caret-bottom":"el-icon-caret-top"})]),t._v(" "),e("el-dropdown-menu",{staticClass:"dropStock",attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",[e("div",{staticClass:"dorpdown-box"},t._l(t.stocksList.options,(function(o,n){return e("div",{key:o.value,staticClass:"fItem",class:{bgGray:t.stocksList.value==o.value},on:{click:function(e){return t.handlerSelect(o.value,o.text,"stock")}}},[e("div",{staticClass:"mr100"},[t._v("\n                  "+t._s(o.text)+"\n                  "),e("span",{directives:[{name:"show",rawName:"v-show",value:o.code,expression:"item.code"}]},[t._v("("+t._s(o.code)+")")])]),t._v(" "),0!=o.value?e("div",{staticClass:"deleteIcon"},[e("i",{staticClass:"el-icon-delete icon click",on:{click:function(e){return e.stopPropagation(),t.removeFollowStock(n,o.value)}}})]):t._e()])})),0)])],1)],1)],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"stock"==t.activeName,expression:"activeName == 'stock'"}],staticClass:"nav-search mluauto"},[e("el-autocomplete",{attrs:{"popper-append-to-body":!1,"popper-class":"jc-autocomplete",autocomplete:"off","fetch-suggestions":t.querySearchAsync,placeholder:"添加要关注的股票"},on:{select:t.handleSelectSearch},model:{value:t.searchStockName,callback:function(o){t.searchStockName=o},expression:"searchStockName"}},[e("i",{staticClass:"search-icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1)]),t._v(" "),e("div",{staticClass:"main"},[t.articles&&t.articles.length>0?e("article-list",{attrs:{data:t.articles,"show-care":"stock"!=t.activeName,pageName:"focus"}}):t._e(),t._v(" "),0!=t.articles.length||t.loading?t._e():e("empty-page",{attrs:{top:"35%",position:"absolute",descripte:"暂无数据"}}),t._v(" "),t.loading&&t.pageNo<6?e("div",{staticClass:"jc-loading"},[e("span")]):t._e(),t._v(" "),t.loading&&t.pageNo>5?e("div",{staticClass:"jc-loading"},[e("div",{staticClass:"jc_more",on:{click:t.loadMore}},[t._v("查看更多")])]):t._e(),t._v(" "),t.noMore&&!t.loading&&t.articles.length>0?e("div",{staticClass:"jc-loading jc-noloading"},[t._v("\n      没有更多了\n    ")]):t._e()],1)])}),[],!1,null,"29383b34",null);o.default=component.exports;installComponents(component,{EmptyPage:e(200).default})}}]);